<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Button Masher - Multiplayer Game</title>
    <link rel="stylesheet" href="styles.css" />
  </head>

  <body style="flex-direction: column">
    <!-- Header Panel -->
    <div class="panel panel-header">
      <h1>Button Smash</h1>
    </div>

    <div class="container">
      <!-- Join/Create Screen -->
      <div class="join-screen active">
        <div class="instructions">
          <strong>Welcome to Button Masher!</strong><br />
          A multiplayer button-smashing game for 2-4 players.<br /><br />
          <strong>How to Play:</strong><br />
          1. Create a new room or join an existing one<br />
          2. Share the room code with friends<br />
          3. When everyone set's their <strong>ready-up</strong> status, the
          game starts!<br />
          4. Click your button as fast as you can<br />
          5. Most clicks wins!
        </div>

        <div class="player-input">
          <input
            type="text"
            id="playerName"
            placeholder="Enter your name"
            value="Player"
          />
          <input
            type="color"
            id="playerColor"
            class="color-picker"
            value="#ff6b6b"
          />
        </div>

        <button class="btn" onclick="createRoom()">Create New Room</button>

        <div class="divider">OR</div>

        <div class="join-room-section">
          <input
            type="text"
            id="roomCodeInput"
            placeholder="Enter Room Code"
            maxlength="4"
            style="text-transform: uppercase"
          />
          <button class="btn" onclick="joinRoom()">Join Room</button>
        </div>
      </div>

      <!-- Waiting Room Screen -->
      <div class="waiting-screen">
        <div class="game-layout">
          <!-- Left Column -->
          <div class="column-left">
            <!-- Room Info Panel -->
            <div class="panel panel-blue room-info-panel">
              <div class="room-info">
                <h2>
                  Room Code: <span id="roomCode" class="room-code">----</span>
                </h2>
                <p class="room-hint">Share this code with your friends!</p>
              </div>
            </div>

            <!-- Chat Panel (Pipe Style) -->
            <div class="panel panel-pipe">
              <div class="chat-section">
                <h3 class="chat-header">üí¨ Chat</h3>
                <div class="chat-messages" id="chatMessages">
                  <!-- Messages will be added here dynamically -->
                </div>
                <div class="chat-input-area">
                  <input
                    type="text"
                    id="chatInput"
                    class="chat-input"
                    placeholder="Type a message..."
                    maxlength="100"
                    onkeypress="if(event.key==='Enter') sendChatMessage()"
                  />
                  <button class="chat-send-btn" onclick="sendChatMessage()">
                    Send
                  </button>
                </div>
              </div>
            </div>
          </div>

          <!-- Right Column -->
          <div class="column-right">
            <!-- Players Panel -->
            <div class="panel panel-pink">
              <h3 class="panel-title">Players</h3>
              <div class="players-waiting" id="playersWaiting">
                <!-- Players will be added here dynamically -->
              </div>
            </div>

            <!-- Ready-Up Panel -->
            <div class="panel panel-orange">
              <div class="ready-section">
                <button
                  class="btn ready-btn"
                  id="readyBtn"
                  onclick="toggleReady()"
                >
                  Ready Up!
                </button>
                <p class="waiting-text" id="waitingText">
                  Waiting for players to ready up...
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Game Screen -->
      <div class="game-screen">
        <div class="countdown" id="countdown">3</div>
        <div class="timer" id="timer">10</div>
        <div class="players-grid" id="playersGrid"></div>
      </div>

      <!-- Results Screen -->
      <div class="results-screen">
        <div style="text-align: center">
          <div class="trophy">üèÜ</div>
          <h2
            id="winnerName"
            style="
              color: #ffffff;
              text-shadow: 4px 4px 0px #000000, -2px -2px 0px #c84c0c;
              margin-bottom: 30px;
              text-transform: uppercase;
            "
          >
            Winner!
          </h2>
        </div>
        <div class="results-list" id="resultsList"></div>
        <button class="btn" onclick="playAgain()">Play Again</button>
        <button class="btn secondary-btn" onclick="leaveRoom()">
          Leave Room
        </button>
      </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="game-client.js"></script>
  </body>
</html>
